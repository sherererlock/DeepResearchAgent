"""深度研究系统的提示模板。

本模块包含研究工作流各组件使用的所有提示模板，
包括用户澄清、研究简报生成和报告合成。
"""

clarify_with_user_instructions="""
以下是用户请求报告时已交换的消息记录：
<消息记录>
{messages}
</消息记录>

当前日期为 {date}。

评估是否需要提出澄清问题，或者用户是否已提供足够信息供您开始研究。
重要提示：如果在消息历史记录中看到您已经提出过澄清问题，通常无需再次提问。仅在绝对必要时才再次提问。

如果存在缩写词、简称或未知术语，请要求用户澄清。
如果需要提问，请遵循以下准则：
- 在收集必要信息时保持简洁
- 确保以简洁、结构良好的方式收集执行研究任务所需的全部信息
- 适当使用项目符号或编号列表以增强清晰度。确保使用Markdown格式，并且字符串输出传递给Markdown渲染器时能正确显示
- 不要询问不必要的信息，或用户已经提供的信息。如果看到用户已提供该信息，请勿再次询问

以有效的JSON格式响应，包含以下确切键：
"need_clarification": boolean,
"question": "<向用户提问以澄清报告范围的问题>",
"verification": "<确认我们将开始研究的验证消息>"

如果需要提出澄清问题，返回：
"need_clarification": true,
"question": "<你的澄清问题>",
"verification": ""

如果不需要提出澄清问题，返回：
"need_clarification": false,
"question": "",
"verification": "<基于所提供信息确认将开始研究的确认消息>"

对于无需澄清时的验证消息：
- 确认你已掌握足够信息继续执行
- 简要总结你从请求中理解的关键要点
- 确认你现在将开始研究流程
- 保持消息简洁专业
"""

transform_messages_into_research_topic_prompt = """
你将获得一组您与用户之间已交换的消息记录。
你的任务是将这些消息转换为更详细、更具体的研究问题，用于指导研究过程。

你与用户之间已交换的消息记录如下：
<消息记录>
{messages}
</消息记录>

当前日期为 {date}。

你需要返回一个单独的研究问题，用于指导研究。

指导原则：
1. 最大化具体性和细节
- 包含所有已知的用户偏好，并明确列出需要考虑的关键属性或维度。
- 确保用户提供的所有细节都包含在指令中。

2. 谨慎处理未声明的维度
- 当研究质量需要考虑用户未指定的额外维度时，将其作为开放考虑因素而非假定偏好来处理。
- 示例：不要说"预算友好的选项"，而应该说"除非指定了成本约束，否则考虑所有价格范围"。
- 仅提及在该领域进行综合研究真正必要的维度。

3. 避免无根据的假设
- 切勿编造用户未声明的特定偏好、约束或要求。
- 如果用户未提供特定细节，请明确注明这一缺失。
- 指导研究人员将未指定的方面视为灵活因素而非做出假设。

4. 区分研究范围与用户偏好
- 研究范围：应调查的主题/维度（可以比用户明确提及的更广泛）
- 用户偏好：特定的约束、要求或偏好（必须仅包含用户声明的内容）
- 示例："研究旧金山咖啡店的咖啡质量因素（包括豆源、烘焙方法、冲泡技术），主要关注用户指定的口感。"

5. 使用第一人称
- 从用户的视角来表述请求。

6. 信息来源
- 如果应优先考虑特定来源，在研究问题中明确说明。
- 对于产品和旅行研究，优先链接到官方或主要网站（例如官方品牌网站、制造商页面，或用于用户评论的信誉良好的电商平台如亚马逊），而非聚合网站或SEO优化的博客。
- 对于学术或科学查询，优先链接到原始论文或官方期刊出版物，而非综述论文或二次摘要。
- 对于人物，尝试直接链接到他们的LinkedIn个人资料或个人网站（如果有）。
- 如果查询使用特定语言，优先选择以该语言发布的来源。
"""
